<!DOCTYPE html>
<html>
    <head>
        <base target="_top">
        
        <link rel="stylesheet" href="https://ssl.gstatic.com/docs/script/css/add-ons1.css">
        <!-- The CSS package above applies Google styling to buttons and other elements. -->
        <style>
            table.ability-scores {
                table-layout: fixed;
                width: 600px;
            }
            table.ability-scores td {
                font-weight: bold;
                text-align: center;
            }
            table.ability-scores td input {
                text-align: center;
            }
            .add-button {
                margin-left: 5px;
            }
            td input {
                margin-left: 5px !important;
            }
            td select {
                margin-left: 5px !important;
            }
            td input[type=number] {
                width: 60px !important;
            }
        </style>
    </head>
    <body>
        <form>
            <h3>Descriptors</h3>
            <table>
                <tr>
                    <td><label for="name">Name:</label></td>
                    <td><input type="text" id="name" name="name"></td>
                </tr>
                <tr>
                    <td><label for="type">Type:</label></td>
                    <td>
                        <select name="type" id="type">
                            <option value="aberration">Aberration</option>
                            <option value="beast">Beast</option>
                            <option value="celestial">Celestial</option>
                            <option value="construct">Construct</option>
                            <option value="dragon">Dragon</option>
                            <option value="elemental">Elemental</option>
                            <option value="fey">Fey</option>
                            <option value="fiend">Fiend</option>
                            <option value="giant">Giant</option>
                            <option value="humanoid">Humanoid</option>
                            <option value="monstrosity">Monstrosity</option>
                            <option value="ooze">Ooze</option>
                            <option value="plant">Plant</option>
                            <option value="undead">Undead</option>
                        </select>
                    </td>
                </tr>
                <tr>
                    <td><label for="size">Size:</label></td>
                    <td>
                        <select name="size" id="size">
                            <option value="tiny">Tiny</option>
                            <option value="small">Small</option>
                            <option value="medium">Medium</option>
                            <option value="large">Large</option>
                            <option value="huge">Huge</option>
                            <option value="gargantuan">Gargantuan</option>
                        </select>
                    </td>
                </tr>
                <tr>
                    <td><label for="alignment">Alignment:</label></td>
                    <td>
                        <select name="alignment" id="alignment">
                            <option value="lg">Lawful Good</option>
                            <option value="ng">Neutral Good</option>
                            <option value="cg">Chaotic Good</option>
                            <option value="ln">Lawful Neutral</option>
                            <option value="n">Neutral</option>
                            <option value="cn">Chaotic Neutral</option>
                            <option value="le">Lawful Evil</option>
                            <option value="ne">Neutral Evil</option>
                            <option value="ce">Chaotic Evil</option>
                            <option value="u">Unaligned</option>
                        </select>
                    </td>
                </tr>
            </table>
            <hr>
            <h3>Numeric Stats</h3>
            <table>
                <tr>
                    <td><label for="ac">Armor Class:</label></td>
                    <td><input type="number" id="ac" name="ac" size="5" min="0"></td>
                </tr>
                <tr>
                    <td><label for="hp">Hit Points:</label></td>
                    <td><input type="number" id="hp" name="hp" size="5" min="0"></td>
                </tr>
                <tr>
                    <td><label for="land-speed">Speeds:</label></td>
                    <td><input type="number" id="land-speed" name="land-speed" placeholder="Land" size="5" min="0"></td>
                    <td><input type="number" id="fly-speed" name="fly-speed" placeholder="Fly" size="5" min="0"></td>
                    <td><input type="number" id="swim-speed" name="swim-speed" placeholder="Swim" size="5" min="0"></td>
                </tr>
                <tr>
                    <td><label for="cr">Challenge Rating:</label></td>
                    <td><input type="number" id="cr" name="cr" size="5" min="0"></td>
                </tr>
            </table>
            <hr>
            <h3>Ability Scores</h3>
            <table class="ability-scores">
                <tr>
                    <td>STR</td>
                    <td>DEX</td>
                    <td>CON</td>
                    <td>INT</td>
                    <td>WIS</td>
                    <td>CHA</td>
                </tr>
                <tr>
                    <td><input type="number" id="str" name="str" size="9" maxlength="2" min="0"></td>
                    <td><input type="number" id="dex" name="dex" size="9" maxlength="2" min="0"></td>
                    <td><input type="number" id="con" name="con" size="9" maxlength="2" min="0"></td>
                    <td><input type="number" id="int" name="int" size="9" maxlength="2" min="0"></td>
                    <td><input type="number" id="wis" name="wis" size="9" maxlength="2" min="0"></td>
                    <td><input type="number" id="cha" name="cha" size="9" maxlength="2" min="0"></td>
                </tr>
            </table>
            <hr>
            <h3>Saving Throws</h3>
            <table class ="ability-scores">
                <tr>
                    <td>STR</td>
                    <td>DEX</td>
                    <td>CON</td>
                    <td>INT</td>
                    <td>WIS</td>
                    <td>CHA</td>
                </tr>
                <tr>
                    <td><input type="number" id="save-str" name="save-str" size="9" maxlength="2"></td>
                    <td><input type="number" id="save-dex" name="save-dex" size="9" maxlength="2"></td>
                    <td><input type="number" id="save-con" name="save-con" size="9" maxlength="2"></td>
                    <td><input type="number" id="save-int" name="save-int" size="9" maxlength="2"></td>
                    <td><input type="number" id="save-wis" name="save-wis" size="9" maxlength="2"></td>
                    <td><input type="number" id="save-cha" name="save-cha" size="9" maxlength="2"></td>
                </tr>
            </table>
            <hr>
            <h3>Passives</h3>
            <table>
                <tr>
                    <td><label for="pass-perception">Passive Perception:</label></td>
                    <td><input type="number" id="pass-perception" name="pass-perception" size="5" min="0"></td>
                </tr>
                <tr id="sense-row0">
                    <td><label for="sense0">Senses:</label></td>
                    <td>
                        <select name="sense0" id="sense0">
                            <option value="no-sense">None</option>
                            <option value="blindsight">Blindsight</option>
                            <option value="darkvision">Darkvision</option>
                            <option value="tremorsense">Tremorsense</option>
                            <option value="Truesight">Truesight</option>
                        </select>
                    </td>
                    <td><input type="number" id="sense-range0" name="sense-range0" min="0" placeholder="ft."></td>
                    <td><button type="button" class="add-button" onclick="generateNewInput('sense-row0')">Add sense</button></td>
                </tr>
                <tr id="skill-row0">
                    <td><label for="skill0">Skills:</label></td>
                    <td>
                        <select name="skill0" id="skill0">
                            <option value="no-skills">None</option>
                            <option value="acrobatics">Acrobatics (dex)</option>
                            <option value="animal">Animal Handling (wis)</option>
                            <option value="arcana">Arcana (int)</option>
                            <option value="athletics">Athletics (str)</option>
                            <option value="deception">Deception (cha)</option>
                            <option value="history">History (int)</option>
                            <option value="insight">Insight (wis)</option>
                            <option value="intimidation">Intimidation (cha)</option>
                            <option value="investigation">Investigation (int)</option>
                            <option value="medicine">Medicine (wis)</option>
                            <option value="nature">Nature (int)</option>
                            <option value="performance">Performance (cha)</option>
                            <option value="persuasion">Persuasion (cha)</option>
                            <option value="religion">Religion (int)</option>
                            <option value="sleight">Sleight of Hand (dex)</option>
                            <option value="stealth">Stealth (dex)</option>
                            <option value="survival">Survival (wis)</option>
                        </select>
                    </td>
                    <td><input type="number" id="skill-mod0" name="skill-mod0" min="0" placeholder="+mod"></td>
                    <td><button type="button" class="add-button">Add Skill</button></td>
                </tr>
                <tr id="language-row0">
                    <td><label for="language0">Languages:</label></td>
                    <td>
                        <select name="language0" id="language0">
                            <option value="no-language">None</option>
                            <option value="common">Common</option>
                            <option value="dwarvish">Dwarvish</option>
                            <option value="elvish">Elvish</option>
                            <option value="giant">Giant</option>
                            <option value="gnomish">Gnomish</option>
                            <option value="goblin">Goblin</option>
                            <option value="halfling">Halfling</option>
                            <option value="orc">Orc</option>
                            <option value="abyssal">Abyssal</option>
                            <option value="celestial">Celestial</option>
                            <option value="draconic">Draconic</option>
                            <option value="deep-speech">Deep Speech</option>
                            <option value="infernal">Infernal</option>
                            <option value="primordial">Primordial</option>
                            <option value="sylvan">Sylvan</option>
                            <option value="undercommon">Undercommon</option>
                        </select>
                    </td>
                    <td><button type="button" class="add-button">Add Language</button></td>
                </tr>
                <tr id="resistance-row0">
                    <td><label for="resistance0">Resistances:</label></td>
                    <td>
                        <select name="resistance0" id="resistance0">
                            <option value="no-resistance">None</option>
                            <option value="acid">Acid</option>
                            <option value="bludgeoning">Bludgeoning</option>
                            <option value="cold">Cold</option>
                            <option value="fire">Fire</option>
                            <option value="force">Force</option>
                            <option value="lightning">Lightning</option>
                            <option value="necrotic">Necrotic</option>
                            <option value="piercing">Piercing</option>
                            <option value="poison">Poison</option>
                            <option value="psychic">Psychic</option>
                            <option value="radiant">Radiant</option>
                            <option value="slashing">Slashing</option>
                            <option value="thunder">Thunder</option>
                        </select>
                    </td>
                    <td><button type="button" class="add-button">Add Resistance</button></td>
                </tr>
                <tr id="immunity-row0">
                    <td><label for="immunity0">Immunities:</label></td>
                    <td>
                        <select name="immunity0" id="immunity0">
                            <option value="no-immunity">None</option>
                            <option value="im-acid">Acid</option>
                            <option value="im-bludgeoning">Bludgeoning</option>
                            <option value="im-cold">Cold</option>
                            <option value="im-fire">Fire</option>
                            <option value="im-force">Force</option>
                            <option value="im-lightning">Lightning</option>
                            <option value="im-necrotic">Necrotic</option>
                            <option value="im-piercing">Piercing</option>
                            <option value="im-poison">Poison</option>
                            <option value="im-psychic">Psychic</option>
                            <option value="im-radiant">Radiant</option>
                            <option value="im-slashing">Slashing</option>
                            <option value="im-thunder">Thunder</option>
                        </select>
                    </td>
                    <td><button type="button" class="add-button">Add Immunity</button></td>
                </tr>
                <tr id="c-immunity-row0">
                    <td><label for="c-immunity0">Condition Immunities:</label></td>
                    <td>
                        <select name="c-immunity0" id="c-immunity0">
                            <option value="no-c-immunity">None</option>
                            <option value="blinded">Blinded</option>
                            <option value="charmed">Charmed</option>
                            <option value="deafened">Deafened</option>
                            <option value="exhaustion">Exhaustion</option>
                            <option value="frightened">Frightened</option>
                            <option value="grappled">Grappled</option>
                            <option value="paralyzed">Paralyzed</option>
                            <option value="petrified">Petrified</option>
                            <option value="poisoned">Poisoned</option>
                            <option value="prone">Prone</option>
                            <option value="restrained">Restrained</option>
                            <option value="stunned">Stunned</option>
                            <option value="unconscious">Unconscious</option>
                        </select>
                    </td>
                    <td><button type="button" class="add-button">Add Condition Immunity</button></td>
                </tr>
            </table>
            <hr>
            <h3>Special Passives</h3>
            <table>
                <tr id="s-passive-row0">
                    <td><label for="s-passive0">Special Passives:</label></td>
                    <td><input type="text" id="s-passive0" name="s-passive0" placeholder="Name"></td>
                    <td><input type="text" id="s-passive-desc0" name="s-passive-desc0" placeholder="Description"></td>
                    <td><button type="button" class="add-button">Add Special Passive</button></td>
                </tr>
            </table>
            <hr>
            <h3>Spellcasting</h3>
            <table>
                <tr>
                    <td><label for="cast-level">Cast Level:</label></td>
                    <td><input type="number" id="cast-level" name="cast-level" size="5" min="0"></td>
                </tr>
                <tr>
                    <td><label for="cast-ability">Cast Ability:</label></td>
                    <td>
                        <select name="cast-ability" id="cast-ability">
                            <option value="cast-none">None</option>
                            <option value="cast-strength">Strength</option>
                            <option value="cast-dexterity">Dexterity</option>
                            <option value="cast-constitution">Constitution</option>
                            <option value="cast-intelligence">Intelligence</option>
                            <option value="cast-wisdom">Wisdom</option>
                            <option value="cast-charisma">Charisma</option>
                        </select>
                    </td>
                </tr>
                <tr>
                    <td><label for="save-dc">Spell Save DC:</label></td>
                    <td><input type="number" id="save-dc" name="save-dc" size="5" min="0"></td>
                </tr>
                <tr>
                    <td><label for="spell-attack-bonus">Spell Attack Bonus:</label></td>
                    <td><input type="number" id="spell-attack-bonus" name="spell-attack-bonus" size="5"></td>
                </tr>
            </table>
            <h4>Spell slots</h4>
            <table class="ability-scores">
                <tr>
                    <td>1</td>
                    <td>2</td>
                    <td>3</td>
                    <td>4</td>
                    <td>5</td>
                    <td>6</td>
                    <td>7</td>
                    <td>8</td>
                    <td>9</td>
                </tr>
                <tr>
                    <td><input type="number" id="slot1" name="slot1" size="4" maxlength="2" min="0"></td>
                    <td><input type="number" id="slot2" name="slot2" size="4" maxlength="2" min="0"></td>
                    <td><input type="number" id="slot3" name="slot3" size="4" maxlength="2" min="0"></td>
                    <td><input type="number" id="slot4" name="slot4" size="4" maxlength="2" min="0"></td>
                    <td><input type="number" id="slot5" name="slot5" size="4" maxlength="2" min="0"></td>
                    <td><input type="number" id="slot6" name="slot6" size="4" maxlength="2" min="0"></td>
                    <td><input type="number" id="slot7" name="slot7" size="4" maxlength="2" min="0"></td>
                    <td><input type="number" id="slot8" name="slot8" size="4" maxlength="2" min="0"></td>
                    <td><input type="number" id="slot9" name="slot9" size="4" maxlength="2" min="0"></td>
                </tr>
            </table>
            <h4>Spells</h4>
            <table>
                <tr>
                    <td><label for="level0-0">Cantrips:</label></td>
                    <td><input type="text" id="level0-0" name="level0-0"></td>
                    <td><button type="button" class="add-button">Add Spell</button></td>
                </tr>
                <tr>
                    <td><label for="level1-0">1st Level:</label></td>
                    <td><input type="text" id="level1-0" name="level1-0"></td>
                    <td><button type="button" class="add-button">Add Spell</button></td>
                </tr>
                <tr>
                    <td><label for="level2-0">2nd Level:</label></td>
                    <td><input type="text" id="level2-0" name="level2-0"></td>
                    <td><button type="button" class="add-button">Add Spell</button></td>
                </tr>
                <tr>
                    <td><label for="level3-0">3rd Level:</label></td>
                    <td><input type="text" id="level3-0" name="level3-0"></td>
                    <td><button type="button" class="add-button">Add Spell</button></td>
                </tr>
                <tr>
                    <td><label for="level4-0">4th Level:</label></td>
                    <td><input type="text" id="level4-0" name="level4-0"></td>
                    <td><button type="button" class="add-button">Add Spell</button></td>
                </tr>
                <tr>
                    <td><label for="level5-0">5th Level:</label></td>
                    <td><input type="text" id="level5-0" name="level5-0"></td>
                    <td><button type="button" class="add-button">Add Spell</button></td>
                </tr>
                <tr>
                    <td><label for="level6-0">6th Level:</label></td>
                    <td><input type="text" id="level6-0" name="level6-0"></td>
                    <td><button type="button" class="add-button">Add Spell</button></td>
                </tr>
                <tr>
                    <td><label for="level7-0">7th Level:</label></td>
                    <td><input type="text" id="level7-0" name="level7-0"></td>
                    <td><button type="button" class="add-button">Add Spell</button></td>
                </tr>
                <tr>
                    <td><label for="level8-0">8th Level:</label></td>
                    <td><input type="text" id="level8-0" name="level8-0"></td>
                    <td><button type="button" class="add-button">Add Spell</button></td>
                </tr>
                <tr>
                    <td><label for="level9-0">9th Level:</label></td>
                    <td><input type="text" id="level9-0" name="level9-0"></td>
                    <td><button type="button" class="add-button">Add Spell</button></td>
                </tr>
            </table>
            <hr>
            <h3>Actions</h3>
            <table>
                <tr>
                    <td><label for="action0">Actions:</label></td>
                    <td><input type="text" id="action0" name="action0" placeholder="Name"></td>
                    <td><input type="text" id="action-desc0" name="action-desc0" placeholder="Description"></td>
                    <td><button type="button" class="add-button">Add Action</button></td>
                </tr>
                <tr>
                    <td><label for="le-action0">Legendary Actions:</label></td>
                    <td><input type="text" id="le-action0" name="le-action0" placeholder="Name"></td>
                    <td><input type="text" id="le-action-desc0" name="le-action-desc0" placeholder="Description"></td>
                    <td><button type="button" class="add-button">Add Legendary Action</button></td>
                </tr>
            </table>
            <hr>
            <h3>Reactions</h3>
            <table>
                <tr>
                    <td><label for="reaction0">Reactions:</label></td>
                    <td><input type="text" id="reaction0" name="reaction0" placeholder="Name"></td>
                    <td><input type="text" id="reaction-desc0" name="reaction-desc0" placeholder="Description"></td>
                    <td><button type="button" class="add-button">Add Reaction</button></td>
                </tr>
            </table>
            <br>
        </form>
        <div class="block" id="submit-bar">
            <button type="submit" class="blue" id="save" onclick="testConsole()">Save Custom Monster</button>
            <input type="button" value="Close" onclick="google.script.host.close()" />
        </div>

        <script>

            // call on its own to insert a new element after the reference
            function insertAfter(newNode, referenceNode)
            {
                referenceNode.parentNode.insertBefore(newNode, referenceNode.nextSibling);
            }

            function incrementIdNumber(id)
            {
                // get number off of rowID
                num = id.charAt(id.length - 1);
                console.log("original row #: " + num);
                
                // increment num;
                num++;
                console.log("new row number will be: " + num);

                // cut off rowID number
                let cutID = id.substring(0, id.length - 1);

                // change clone id
                return cutID + num;
            }

            function generateNewInput(rowID)
            {   
                // get row
                let row = document.getElementById(rowID);

                // clone row
                let clone = row.cloneNode(true);

                // change clone id
                clone.id = incrementIdNumber(rowID);
                console.log("cloned row id: " + clone.id);

                // get original children ids
                let labelFor = row.getElementsByTagName('label')[0].htmlFor;
                let selectName = row.getElementsByTagName('select')[0].name;
                let selectID = row.getElementsByTagName('select')[0].id;
                let inputID = row.getElementsByTagName('input')[0].id;
                let inputName = row.getElementsByTagName('input')[0].name;

                // button: generateNewInput('sense-row0')
                
                // change clone children ids
                clone.getElementsByTagName('label')[0].htmlFor = incrementIdNumber(labelFor);
                clone.getElementsByTagName('select')[0].name = incrementIdNumber(selectName);
                clone.getElementsByTagName('select')[0].id = incrementIdNumber(selectID);
                clone.getElementsByTagName('input')[0].id = incrementIdNumber(inputID);
                clone.getElementsByTagName('input')[0].name = incrementIdNumber(inputName);

                // insert clone
                insertAfter(clone, row);
            }
        </script>
    </body>
</html>
